{% extends "base.html" %}


{% set model_status = none %}
{% set data_status = none %}
{% set runs_status = 'active' %}
{% set audit_status = none %}
{% include "include/navbar.html" %}

{% block title %}
  <title>Runs</title>
{% endblock %}

{% block content %}
<body id="RunPage">
<div class="container" style="padding-top:65px;">
</div>

<br>
<h5 style="padding-top:10px; padding-left:40px;">Select a project to view available runs</h5>

<div style="padding-top:2px; padding-left:40px;">
   
  <select class="dropdown" id="MetadataRepositoriesSelect" style="visibility:hidden;">
    
      {% if all_projects is not none %}

        {% for project in all_projects %}
        <option value="/opsml/projects/list/?project={{ project }}" {% if project == selected_project %} selected="selected" {% endif %}>{{ project }}</option>
        {% endfor %}
      {% else %}
      <option value="None">No project found</option>
      {% endif %}
  </select>

</div>


{% if runcard is not none %}
<div class"containter" id="split-column">
  <div class="boxes" id="VersionContainer">


    <div id="VersionColumn">
      <div class="list-group">
        {% for run in project_runs %}
          <a href="#" onclick="get_project('{{ run["uid"] }}', '{{ selected_project }}')"  class="list-group-item list-group-item-action {% if runcard["uid"] ==  run["uid"] %}active {% endif %}">{{ run["name"] }} -- {{ run["date"] }}</a>
        {% endfor %}
      </div>
    </div>

    <div id="MetadataColumn">
    </div>

    <div id="ImageModal" class="modal">
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="ImageModalLabel" style="float: left;">Artifact</h5>
            <a id="modal-download" href="placeholder">
              <button id="download-button" type="submit" class="btn btn-success">Download</button>
            </a>
          </div>
          <div class="modal-body">
       
            <img src="https://via.placeholder.com/500" id="modal_img">
          </div>
        </div>
      </di>
    </div>
  </div>
</div>
{% endif %}

<figure class="highcharts-figure">
  <div id="container"></div>
  <p class="highcharts-description">
      This chart shows how symbols and shapes can be used in charts.
      Highcharts includes several common symbol shapes, such as squares,
      circles and triangles, but it is also possible to add your own
      custom symbols. In this chart, custom weather symbols are used on
      data points to highlight that certain temperatures are warm while
      others are cold.
  </p>
</figure>



</body>

{% endblock %}

{% block scripts %}




<script type="module">
  import { generate_html_from_data, ready_project_page, call_graphics, call_metadata, ready_project_toggles, ready_project_buttons} from '/static/js/utils.js';



  // Prepare project page and render default metadata
  $(document).ready( function() {
    let run_uid = "{{ runcard['uid'] }}";
    let project = "{{ selected_project }}";
    ready_project_page(run_uid, project);
  });


  $(document).on('click','#graphics-button',function(){
    // get data from element
    let element = document.getElementById("graphics-button");
    call_graphics(element.getAttribute('data-runid')) ;

  });
 

  window.get_project=(run_uid, project)=>{
    ready_project_page(run_uid, project);
    ready_project_buttons();
  }



</script>


<script src="/static/chart/highcharts.js"></script>
<script src="/static/chart/modules/data.js"></script>
<script src="/static/chart/modules/series-label.js"></script>
<script src="/static/chart/modules/exporting.js"></script>
<script src="/static/chart/modules/export-data.js"></script>
<script src="/static/chart/modules/accessibility.js"></script>
<script>

  // Create the chart
  Highcharts.setOptions({
    colors: ['#04b78a', "#5e0fb7", "#bdbdbd", "#009adb"],
  });




  $(document).on('click','#plot-metric',function(){


    var selected_metrics = [];
    var selected_chart = [];

    $('#myForm input:checked').each(function() {

        if ($(this).attr('name') == 'bar' || $(this).attr('name') == 'step') {
            selected_chart.push($(this).attr('name'));
        }
        else {
            selected_metrics.push($(this).attr('name'));
        }
  
    });

    alert(selected_chart);

  });

</script>




{% endblock %}






