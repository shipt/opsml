<div class="container" style="padding-top:50px;">
    <div class="row">
      <h5 class="display-8">Available Model Versions</h5>
</div>

<!---- Model version table -------->
<div class="container">
    <div class="page-header">
      <h2>{{selected_model}}</h2>
    </div>
</div>
<br>

<!---Create vesion tables ------>
<div style="width: 120%;">
  <div style="width: 16%; float: left;"> 
    <div class="list-group">
      {% for version in versions %}
        <a href="/opsml/models/versions/?model={{ selected_model }}&selected_version={{ version["version"] }}" class="list-group-item list-group-item-action {% if selected_version ==  version["version"] %}active {% endif %}">v{{ version["version"] }} -- {{ version["date"] }}</a>
      {% endfor %}
    </div>
  </div>
</div>

  <div style="width: 79%;"> 

    <div class="card" id="Metadata" style="width:79%; float:right;"s>
      <div class="card-body">
        <h4>Model</h4>

        <table align="left" class="no-spacing" cellspacing="0" id="VersionTable">
          <colgroup>
            <col span="1" style="width: 5%;">
            <col span="1" style="width: 15%;">
            <col span="1" style="width: 59%;">
         </colgroup>
          <tbody>
            <tr>
              <td><i class="fa fa-id-card" style="color:#04b78a"></i></td>
              <td><font color="#999">ID:</font></td>
              <td>{{ model_id }}</td>
            </tr>

            <tr>
              <td><i class="fa fa-users" style="color:#04b78a"></i></td>
              <td><font color="#999">Team:</font></td>
              <td>{{ metadata["model_team"] }}</td>
            </tr>

            <tr>
              <td><i class="fa fa-file" style="color:#04b78a"></i></td>
              <td><font color="#999">Type:</font></td>
              <td>{{metadata["model_type"]}}</td>
            </tr>

            {% if metadata["onnx_uri"] is not none %}
              <tr>
                <td><i class="fa-solid fa-download" style="color:#04b78a"></i></td>
                <td><font color="#999">Onnx Model:</font></td>
                <td>
                  <a href="/opsml/files/download?read_path={{metadata["onnx_uri"]}}" download={{metadata["onnx_uri"].split("/")[-1]}}>
                    <button id="download-button" type="submit" class="btn btn-success" >Download</button>
                  </a>
              </td>
              </tr>
            {% endif %}

            <tr>
              <td><i class="fa-solid fa-download" style="color:#04b78a"></i></td>
              <td><font color="#999">Trained Model:</font></td>
              <td>
                  <a href="/opsml/files/download?read_path={{metadata["model_uri"]}}" download={{metadata["model_uri"].split("/")[-1]}}>
                    <button id="download-button" type="submit" class="btn btn-success" >Download</button>
                  </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <hr id="version-spacer">

      {% if runcard["tags"]|length > 0 %}
        <div class="card-body">
          <h5><font color="#999">Tags</font></h5>
          <table align="left" class="no-spacing" cellspacing="0" id="VersionTable">
            <colgroup>
              <col span="1" style="width: 4%;">
              <col span="1" style="width: 15%;">
              <col span="1" style="width: 59%;">
     
          </colgroup>
            <tbody>
              {% for tag_name, tag_value in runcard["tags"].items() %}
                  <tr>
                    <td><i class="fa-solid fa-tag" style="color:#04b78a"></i></td>
                    <td><font color="#999">{{tag_name}}:</font></td>
                    <td>{{tag_value}}</td>
                  </tr>
                {% endfor %}
            </tbody>
          </table>
          <hr id="version-spacer">
        </div>
      {% endif %}

      <hr id="version-spacer">
      <div class="card-body">
        <button id="download-button" type="submit" class="btn btn-success" >Metrics</button>
        <button id="download-button" type="submit" class="btn btn-success" >Sample Data</button>
        <button id="download-button" type="submit" class="btn btn-success" >Params</button>
        <button id="download-button" type="submit" class="btn btn-success" >Artifacts</button>
      </div>

      {% if runcard["metrics"]|length > 0 %}
        <div class="card-body">
          <table align="left" class="no-spacing" cellspacing="0" id="VersionTable">

            <thead style="background:white;">
              <tr>
                <th scope="col"></th>
                <th scope="col">Name</th>
                <th scope="col">Value</th>
                <th scope="col">Step</th>
                <th scope="col">Timestamps</th>
              </tr>
            </thead>
            
            <colgroup>
              <col span="1" style="width: 4%;">
              <col span="1" style="width: 15%;">
              <col span="1" style="width: 15%;">
              <col span="1" style="width: 15%;">
              <col span="1" style="width: 15%;">
     
          </colgroup>
            <tbody>
              {% for metric_name, metric_values in runcard["metrics"].items() %}
                  <tr>
                    <td><i class="fa-solid fa-tag" style="color:#04b78a"></i></td>
                    <td><font color="#999">{{metric_name}}:</font></td>
                    <td>{{metric_values[-1].value}}</td>
                    <td>{{metric_values[-1].step}}</td>
                    <td>{{metric_values[-1].timestamp}}</td>
                  </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
      {% endif %}
    </div>
  </div>
</div>